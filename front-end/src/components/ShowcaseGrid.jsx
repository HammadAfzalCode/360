// import * as React from "react";
// import { styled } from "@mui/material/styles";
// import Box from "@mui/material/Box";
// import Paper from "@mui/material/Paper";
// import Grid from "@mui/material/Grid";
// import ActionAreaCard from "./ShowcaseNewcard";
// import ShowcaseCard from "./ShowcaseNewcard";


const jsonData ={
  "data": [
    {
      "id": 6,
      "attributes": {
        "createdAt": "2024-06-24T05:52:40.365Z",
        "updatedAt": "2024-06-24T10:06:19.460Z",
        "publishedAt": "2024-06-24T05:52:42.602Z",
        "CardTitle": "Fintech",
        "shortDescription": "Transforming Finance with Fast & Ease",
        "cardImage": {
          "data": [
            {
              "id": 1,
              "attributes": {
                "name": "MAFIChero.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1728,
                "height": 959,
                "formats": {

                },
                "hash": "MAFI_Chero_8516c36322",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 268.27,
                "url": "/uploads/MAFI_Chero_8516c36322.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-20T06:35:00.150Z",
                "updatedAt": "2024-06-24T05:26:42.749Z"
              }
            }
          ]
        },
        "detailPageImg": {
          "data": [
            {
              "id": 5,
              "attributes": {
                "name": "invesments.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1728,
                "height": 1130,
                "formats": null,
                "hash": "invesments_7713c0a54b",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 2575.07,
                "url": "/uploads/invesments_7713c0a54b.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T09:56:17.834Z",
                "updatedAt": "2024-06-24T09:56:17.834Z"
              }
            },
            {
              "id": 4,
              "attributes": {
                "name": "ji.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1644,
                "height": 987,
                "formats": null,
                "hash": "ji_cafdcbe819",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 0.62,
                "url": "/uploads/ji_cafdcbe819.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T06:05:06.231Z",
                "updatedAt": "2024-06-24T06:05:06.231Z"
              }
            },
            {
              "id": 3,
              "attributes": {
                "name": "bg.png",
                "alternativeText": null,
                "caption": null,
                "width": 1644,
                "height": 987,
                "formats": {
                  "thumbnail": {
                    "name": "thumbnail_bg.png",
                    "hash": "thumbnail_bg_55cddbc52a",
                    "ext": ".png",
                    "mime": "image/png",
                    "path": null,
                    "width": 245,
                    "height": 147,
                    "size": 9.04,
                    "sizeInBytes": 9039,
                    "url": "/uploads/thumbnail_bg_55cddbc52a.png"
                  },
                  "small": {
                    "name": "small_bg.png",
                    "hash": "small_bg_55cddbc52a",
                    "ext": ".png",
                    "mime": "image/png",
                    "path": null,
                    "width": 500,
                    "height": 300,
                    "size": 42.68,
                    "sizeInBytes": 42682,
                    "url": "/uploads/small_bg_55cddbc52a.png"
                  },
                  "medium": {
                    "name": "medium_bg.png",
                    "hash": "medium_bg_55cddbc52a",
                    "ext": ".png",
                    "mime": "image/png",
                    "path": null,
                    "width": 750,
                    "height": 450,
                    "size": 119.09,
                    "sizeInBytes": 119093,
                    "url": "/uploads/medium_bg_55cddbc52a.png"
                  },
                  "large": {
                    "name": "large_bg.png",
                    "hash": "large_bg_55cddbc52a",
                    "ext": ".png",
                    "mime": "image/png",
                    "path": null,
                    "width": 1000,
                    "height": 600,
                    "size": 253.21,
                    "sizeInBytes": 253206,
                    "url": "/uploads/large_bg_55cddbc52a.png"
                  }
                },
                "hash": "bg_55cddbc52a",
                "ext": ".png",
                "mime": "image/png",
                "size": 139.02,
                "url": "/uploads/bg_55cddbc52a.png",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T06:02:06.472Z",
                "updatedAt": "2024-06-24T06:02:06.472Z"
              }
            },
            {
              "id": 2,
              "attributes": {
                "name": "project3.jpeg",
                "alternativeText": null,
                "caption": null,
                "width": 642,
                "height": 389,
                "formats": {
                  "thumbnail": {
                    "name": "thumbnail_project3.jpeg",
                    "hash": "thumbnail_project3_865691ec0a",
                    "ext": ".jpeg",
                    "mime": "image/jpeg",
                    "path": null,
                    "width": 245,
                    "height": 148,
                    "size": 5.68,
                    "sizeInBytes": 5680,
                    "url": "/uploads/thumbnail_project3_865691ec0a.jpeg"
                  },
                  "small": {
                    "name": "small_project3.jpeg",
                    "hash": "small_project3_865691ec0a",
                    "ext": ".jpeg",
                    "mime": "image/jpeg",
                    "path": null,
                    "width": 500,
                    "height": 303,
                    "size": 16.77,
                    "sizeInBytes": 16770,
                    "url": "/uploads/small_project3_865691ec0a.jpeg"
                  }
                },
                "hash": "project3_865691ec0a",
                "ext": ".jpeg",
                "mime": "image/jpeg",
                "size": 23.31,
                "url": "/uploads/project3_865691ec0a.jpeg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-20T10:45:05.190Z",
                "updatedAt": "2024-06-20T10:45:05.190Z"
              }
            }
          ]
        }
      }
    },
    {
      "id": 7,
      "attributes": {
        "createdAt": "2024-06-24T05:59:18.868Z",
        "updatedAt": "2024-06-24T05:59:20.415Z",
        "publishedAt": "2024-06-24T05:59:20.411Z",
        "CardTitle": "Mavi",
        "shortDescription": "A beautiful dashboard for user control",
        "cardImage": {
          "data": [
            {
              "id": 2,
              "attributes": {
                "name": "project3.jpeg",
                "alternativeText": null,
                "caption": null,
                "width": 642,
                "height": 389,
                "formats": {
                  "thumbnail": {
                    "name": "thumbnail_project3.jpeg",
                    "hash": "thumbnail_project3_865691ec0a",
                    "ext": ".jpeg",
                    "mime": "image/jpeg",
                    "path": null,
                    "width": 245,
                    "height": 148,
                    "size": 5.68,
                    "sizeInBytes": 5680,
                    "url": "/uploads/thumbnail_project3_865691ec0a.jpeg"
                  },
                  "small": {
                    "name": "small_project3.jpeg",
                    "hash": "small_project3_865691ec0a",
                    "ext": ".jpeg",
                    "mime": "image/jpeg",
                    "path": null,
                    "width": 500,
                    "height": 303,
                    "size": 16.77,
                    "sizeInBytes": 16770,
                    "url": "/uploads/small_project3_865691ec0a.jpeg"
                  }
                },
                "hash": "project3_865691ec0a",
                "ext": ".jpeg",
                "mime": "image/jpeg",
                "size": 23.31,
                "url": "/uploads/project3_865691ec0a.jpeg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-20T10:45:05.190Z",
                "updatedAt": "2024-06-20T10:45:05.190Z"
              }
            }
          ]
        },
        "detailPageImg": {
          "data": null
        }
      }
    },
    {
      "id": 8,
      "attributes": {
        "createdAt": "2024-06-24T06:02:12.070Z",
        "updatedAt": "2024-06-24T11:01:06.864Z",
        "publishedAt": "2024-06-24T06:02:13.559Z",
        "CardTitle": "HealthXPakistan",
        "shortDescription": "Transforming Finance with Fast & Ease",
        "cardImage": {
          "data": [
            {
              "id": 4,
              "attributes": {
                "name": "ji.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1644,
                "height": 987,
                "formats": null,
                "hash": "ji_cafdcbe819",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 0.62,
                "url": "/uploads/ji_cafdcbe819.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T06:05:06.231Z",
                "updatedAt": "2024-06-24T06:05:06.231Z"
              }
            }
          ]
        },
        "detailPageImg": {
          "data": [
            {
              "id": 7,
              "attributes": {
                "name": "app integrations.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1528,
                "height": 657,
                "formats": null,
                "hash": "app_integrations_182df2dc1b",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 556.65,
                "url": "/uploads/app_integrations_182df2dc1b.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T11:00:34.965Z",
                "updatedAt": "2024-06-24T11:00:34.965Z"
              }
            },
            {
              "id": 8,
              "attributes": {
                "name": "app banner.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1645,
                "height": 812,
                "formats": null,
                "hash": "app_banner_043d409a90",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 1436.22,
                "url": "/uploads/app_banner_043d409a90.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T11:00:36.555Z",
                "updatedAt": "2024-06-24T11:00:36.555Z"
              }
            },
            {
              "id": 9,
              "attributes": {
                "name": "solutions.svg",
                "alternativeText": null,
                "caption": null,
                "width": 1728,
                "height": 1086,
                "formats": null,
                "hash": "solutions_0229f18a32",
                "ext": ".svg",
                "mime": "image/svg+xml",
                "size": 665.06,
                "url": "/uploads/solutions_0229f18a32.svg",
                "previewUrl": null,
                "provider": "local",
                "provider_metadata": null,
                "createdAt": "2024-06-24T11:00:36.964Z",
                "updatedAt": "2024-06-24T11:00:36.964Z"
              }
            }
          ]
        }
      }
    }
  ],
  "meta": {
    "pagination": {
      "page": 1,
      "pageSize": 25,
      "pageCount": 1,
      "total": 3
    }
  }
}

// export default function ShowcaseGrid() {
//   const [data,setData] = React.useState(null)
  
//   const fetchData = async () => {
//     const data = await fetch(
//       'http://localhost:1337/api/showcase-datas?populate=*'
//     );
//     const json = await data.json();
//     setData(json.data)
//     // console.log(json)
//   };
//   React.useEffect(() => {
//     fetchData();
//     console.log(data[0].attributes.CardTitle)
//   }, []);
//   return (
//     <Box
//       sx={{
//         flexGrow: 1,
//         marginTop: "200px",
//         marginX: "auto",
//         maxWidth: "90vw",
//       }}
//     >
    
//       <Grid container spacing={2} rowSpacing={4}>
//         <Grid item xs={12} sm={6} md={4}>
//           <ShowcaseCard
//             title="Fintech"
//             description="Transforming Islamic Banking with Ease"
//             img="/fintechhreo.svg"
//           />
//         </Grid>
//         <Grid item xs={12} sm={6} md={4}>
//           <ShowcaseCard
//             title="Fintech"
//             description="Transforming Islamic Banking with Ease"
//             img="/fintechhreo.svg"
//           />
//         </Grid>
//         <Grid item xs={12} sm={6} md={4}>
//           <ShowcaseCard
//             title="Fintech"
//             description="Transforming Islamic Banking with Ease"
//             img="/fintechhreo.svg"
//           />
//         </Grid>
//         <Grid item xs={12} sm={6} md={4}>
//           <ShowcaseCard
//             title="Fintech"
//             description="Transforming Islamic Banking with Ease"
//             img="/fintechhreo.svg"
//           />
//         </Grid>
//       </Grid>
//     </Box>
//   );
// }

import * as React from "react";
import { styled } from "@mui/material/styles";
import Box from "@mui/material/Box";
import Grid from "@mui/material/Grid";
import ShowcaseCard from "./ShowcaseNewcard";
import Link from "next/link";
import slugify from "slugify";

export default function ShowcaseGrid() {
  const [data, setData] = React.useState(null);
  const baseUrl ='http://localhost:1337'
  const fetchData = async () => {
    try {
      const response = await fetch(
        'http://localhost:1337/api/showcase-datas?populate=*'
      );
      const json = await response.json();
      setData(json.data);
    } catch (error) {
      console.error('Error fetching data:', error);
    }
  };

  React.useEffect(() => {
    fetchData();
  }, []);

  if (!data) {
    return <div>Loading...</div>; // Show a loading message while data is being fetched
  }

  return (
    <Box
      sx={{
        flexGrow: 1,
        marginTop: "200px",
        marginX: "auto",
        maxWidth: "90vw",
      }}
    >
      <Grid container spacing={2} rowSpacing={4}>
        {data.map((item,index) => {
          const { id, attributes } = item;
          const { CardTitle, shortDescription, cardImage } = attributes;
          const imgUrl = cardImage?.data[0]?.attributes?.url || '';
          

          return (
            <Grid item key={id} xs={12} sm={6} md={4}>
               <Link
                      href={`/showcase/${id}/${slugify(
                        CardTitle,
                        { lower: true, strict: true }
                      )}`}
                      passHref
                    >
              <ShowcaseCard
                title={CardTitle}
                description={shortDescription}
                img={`${baseUrl}${imgUrl}`}
              /></Link>
            </Grid>
          );
        })}
      </Grid>
    </Box>
  );
}
